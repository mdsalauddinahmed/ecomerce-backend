{
  "info": {
    "name": "E-commerce API - Authentication",
    "_postman_id": "auth-collection-2025",
    "description": "Complete authentication endpoints for E-commerce API with JWT",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "1. Register User (Customer)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('token', jsonData.data.token);",
                  "    pm.environment.set('userId', jsonData.data.user._id);",
                  "    pm.collectionVariables.set('token', jsonData.data.token);",
                  "    pm.collectionVariables.set('userId', jsonData.data.user._id);",
                  "    console.log('Token saved:', jsonData.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\",\n  \"role\": \"customer\",\n  \"profile\": {\n    \"phone\": \"+1234567890\",\n    \"address\": \"123 Main Street\",\n    \"city\": \"New York\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/signup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "signup"]
            },
            "description": "Register a new customer user. Token will be automatically saved to environment variables."
          },
          "response": []
        },
        {
          "name": "2. Register Admin User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('adminToken', jsonData.data.token);",
                  "    pm.collectionVariables.set('adminToken', jsonData.data.token);",
                  "    console.log('Admin token saved:', jsonData.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Admin User\",\n  \"email\": \"admin@example.com\",\n  \"password\": \"admin123\",\n  \"role\": \"admin\",\n  \"profile\": {\n    \"phone\": \"+1987654321\",\n    \"address\": \"456 Admin Ave\",\n    \"city\": \"San Francisco\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/signup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "signup"]
            },
            "description": "Register an admin user. Admin token will be saved separately."
          },
          "response": []
        },
        {
          "name": "3. Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set('token', jsonData.data.token);",
                  "    pm.collectionVariables.set('token', jsonData.data.token);",
                  "    console.log('Token saved:', jsonData.data.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Login with email and password. Returns JWT token."
          },
          "response": []
        },
        {
          "name": "4. Get My Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "Get current logged-in user's profile. Requires authentication token."
          },
          "response": []
        },
        {
          "name": "5. Update My Profile",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe Updated\",\n  \"profile\": {\n    \"phone\": \"+1234567890\",\n    \"address\": \"789 New Address St\",\n    \"city\": \"Los Angeles\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            },
            "description": "Update current user's profile information."
          },
          "response": []
        },
        {
          "name": "6. Change Password",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"password123\",\n  \"newPassword\": \"newpassword123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/change-password",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "change-password"]
            },
            "description": "Change current user's password. Requires current password."
          },
          "response": []
        },
        {
          "name": "7. Logout",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            },
            "description": "Logout current user (clears JWT cookie)."
          },
          "response": []
        }
      ],
      "description": "User authentication endpoints"
    },
    {
      "name": "Admin - User Management",
      "item": [
        {
          "name": "1. Get All Users (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/users",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "users"]
            },
            "description": "Get all users. Requires admin role."
          },
          "response": []
        },
        {
          "name": "2. Delete User (Admin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{adminToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/users/{{userId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "users", "{{userId}}"]
            },
            "description": "Delete a user by ID. Requires admin role."
          },
          "response": []
        }
      ],
      "description": "Admin-only user management endpoints"
    },
    {
      "name": "Products (with Auth)",
      "item": [
        {
          "name": "1. Create Product",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"iPhone 15 Pro\",\n  \"description\": \"The latest iPhone with A17 Pro chip, titanium design, and advanced camera system.\",\n  \"price\": 1299,\n  \"category\": \"Electronics\",\n  \"tags\": [\"smartphone\", \"Apple\", \"iOS\", \"5G\"],\n  \"variants\": [\n    {\n      \"type\": \"Color\",\n      \"value\": \"Natural Titanium\"\n    },\n    {\n      \"type\": \"Storage\",\n      \"value\": \"256GB\"\n    }\n  ],\n  \"inventory\": {\n    \"quantity\": 50,\n    \"inStock\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products"]
            },
            "description": "Create a new product (can be protected with auth if needed)"
          },
          "response": []
        },
        {
          "name": "2. Get All Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products"]
            },
            "description": "Get all products (public endpoint)"
          },
          "response": []
        },
        {
          "name": "3. Search Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/products?searchTerm=iPhone",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products"],
              "query": [
                {
                  "key": "searchTerm",
                  "value": "iPhone"
                }
              ]
            },
            "description": "Search products by name, description, category, or tags"
          },
          "response": []
        }
      ],
      "description": "Product management endpoints"
    },
    {
      "name": "Orders (with Auth)",
      "item": [
        {
          "name": "1. Create Order",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\",\n  \"products\": [\n    {\n      \"productId\": \"PRODUCT_ID_HERE\",\n      \"quantity\": 2\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            },
            "description": "Create a new order. Replace PRODUCT_ID_HERE with actual product ID."
          },
          "response": []
        },
        {
          "name": "2. Get All Orders",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            },
            "description": "Get all orders"
          },
          "response": []
        },
        {
          "name": "3. Get Orders by Email",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/orders?email=john@example.com",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"],
              "query": [
                {
                  "key": "email",
                  "value": "john@example.com"
                }
              ]
            },
            "description": "Get orders for a specific email address"
          },
          "response": []
        }
      ],
      "description": "Order management endpoints"
    },
    {
      "name": "Test Data Examples",
      "item": [
        {
          "name": "Multiple Users - Customer 1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Alice Smith\",\n  \"email\": \"alice@example.com\",\n  \"password\": \"alice123\",\n  \"role\": \"customer\",\n  \"profile\": {\n    \"phone\": \"+1555123456\",\n    \"address\": \"101 Oak Street\",\n    \"city\": \"Seattle\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/signup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "signup"]
            }
          },
          "response": []
        },
        {
          "name": "Multiple Users - Customer 2",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Bob Johnson\",\n  \"email\": \"bob@example.com\",\n  \"password\": \"bob123\",\n  \"role\": \"customer\",\n  \"profile\": {\n    \"phone\": \"+1555987654\",\n    \"address\": \"202 Pine Avenue\",\n    \"city\": \"Portland\",\n    \"country\": \"USA\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/signup",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "signup"]
            }
          },
          "response": []
        },
        {
          "name": "Product - Samsung Galaxy",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Samsung Galaxy S24 Ultra\",\n  \"description\": \"Premium Android smartphone with S Pen, 200MP camera, and AI features.\",\n  \"price\": 1199,\n  \"category\": \"Electronics\",\n  \"tags\": [\"smartphone\", \"Samsung\", \"Android\", \"5G\"],\n  \"variants\": [\n    {\n      \"type\": \"Color\",\n      \"value\": \"Titanium Black\"\n    },\n    {\n      \"type\": \"Storage\",\n      \"value\": \"512GB\"\n    }\n  ],\n  \"inventory\": {\n    \"quantity\": 35,\n    \"inStock\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products"]
            }
          },
          "response": []
        },
        {
          "name": "Product - MacBook Pro",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"MacBook Pro 16-inch M3 Max\",\n  \"description\": \"Powerful laptop for professionals with M3 Max chip, stunning display, and all-day battery.\",\n  \"price\": 3499,\n  \"category\": \"Computers\",\n  \"tags\": [\"laptop\", \"Apple\", \"MacBook\", \"M3\"],\n  \"variants\": [\n    {\n      \"type\": \"Color\",\n      \"value\": \"Space Black\"\n    },\n    {\n      \"type\": \"Memory\",\n      \"value\": \"36GB\"\n    },\n    {\n      \"type\": \"Storage\",\n      \"value\": \"1TB SSD\"\n    }\n  ],\n  \"inventory\": {\n    \"quantity\": 20,\n    \"inStock\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products"]
            }
          },
          "response": []
        },
        {
          "name": "Product - AirPods Pro",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"AirPods Pro (2nd generation)\",\n  \"description\": \"Premium wireless earbuds with active noise cancellation and spatial audio.\",\n  \"price\": 249,\n  \"category\": \"Audio\",\n  \"tags\": [\"earbuds\", \"Apple\", \"wireless\", \"noise-cancelling\"],\n  \"variants\": [\n    {\n      \"type\": \"Case\",\n      \"value\": \"USB-C\"\n    }\n  ],\n  \"inventory\": {\n    \"quantity\": 100,\n    \"inStock\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/products",
              "host": ["{{baseUrl}}"],
              "path": ["api", "products"]
            }
          },
          "response": []
        }
      ],
      "description": "Additional test data for creating multiple users and products"
    }
  ]
}
